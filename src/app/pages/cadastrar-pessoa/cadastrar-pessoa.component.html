<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
      <div class="card shadow-sm">
        <div class="card-body">
          <h2 class="card-title mb-4">{{ formulario.get('id')?.value ? 'Editar Pessoa' : 'Cadastrar Pessoa' }}</h2>
          <form [formGroup]="formulario" (ngSubmit)="onSubmit()">

            <div class="mb-3">
              <label for="nome" class="form-label">Nome Completo</label>
              <input type="text" id="nome" class="form-control" formControlName="nome" [class.is-invalid]="nome?.invalid && nome?.touched">
              <div *ngIf="nome?.invalid && nome?.touched" class="text-danger mt-1">
                <small *ngIf="nome?.errors?.['required']">O nome é obrigatório.</small>
              </div>
            </div>

            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="cpf" class="form-label">CPF</label>
                <input type="text" id="cpf" class="form-control" formControlName="cpf" mask="000.000.000-00" [class.is-invalid]="cpf?.invalid && cpf?.touched">
                 <div *ngIf="cpf?.invalid && cpf?.touched" class="text-danger mt-1">
                  <small *ngIf="cpf?.errors?.['required']">O CPF é obrigatório.</small>
                  <small *ngIf="cpf?.errors?.['minlength'] || cpf?.errors?.['maxlength']">O CPF deve ter 11 dígitos.</small>
                </div>
              </div>
              <div class="col-md-6 mb-3">
                <label for="telefone" class="form-label">Telefone</label>
                <input type="text" id="telefone" class="form-control" formControlName="telefone" mask="(00) 00000-0000" [class.is-invalid]="telefone?.invalid && telefone?.touched">
                 <div *ngIf="telefone?.invalid && telefone?.touched" class="text-danger mt-1">
                  <small *ngIf="telefone?.errors?.['required']">O telefone é obrigatório.</small>
                   <small *ngIf="telefone?.errors?.['minlength'] || telefone?.errors?.['maxlength']">O telefone está incompleto.</small>
                </div>
              </div>
            </div>

            <div class="mb-3">
              <label for="email" class="form-label">Email</label>
              <input type="email" id="email" class="form-control" formControlName="email" [class.is-invalid]="email?.invalid && email?.touched">
               <div *ngIf="email?.invalid && email?.touched" class="text-danger mt-1">
                  <small *ngIf="email?.errors?.['required']">O email é obrigatório.</small>
                  <small *ngIf="email?.errors?.['email']">O formato do email é inválido.</small>
                </div>
            </div>

            <div class="mb-3">
              <label for="endereco" class="form-label">Endereço</label>
              <input type="text" id="endereco" class="form-control" formControlName="endereco" [class.is-invalid]="endereco?.invalid && endereco?.touched">
               <div *ngIf="endereco?.invalid && endereco?.touched" class="text-danger mt-1">
                  <small *ngIf="endereco?.errors?.['required']">O endereço é obrigatório.</small>
                </div>
            </div>

            <div class="d-flex justify-content-end gap-2 mt-4">
              <button type="button" class="btn btn-secondary" routerLink="/consultar">Cancelar</button>
              <button type="submit" class="btn btn-primary" [disabled]="formulario.invalid">Salvar</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
